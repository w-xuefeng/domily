const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B90AYqLj.js","assets/index-DuxN6OLR.css"])))=>i.map(i=>d[i]);
var sn=Object.defineProperty;var ot=t=>{throw TypeError(t)};var an=(t,e,n)=>e in t?sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m=(t,e,n)=>an(t,typeof e!="symbol"?e+"":e,n),ln=(t,e,n)=>e.has(t)||ot("Cannot "+n);var st=(t,e,n)=>e.has(t)?ot("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Pe=(t,e,n)=>(ln(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
 * @name @domily/runtime-core
 * @type esm
 * @version 0.0.8
 * @author w-xuefeng
 * @license MIT
 */var at,w,un=Object.defineProperty,J=(t,e)=>{for(var n in e)un(t,n,{get:e[n],enumerable:!0})};function cn(t){var e=t.update,n=t.notify,r=t.unwatched;return{link:function(s,f){var c=f.depsTail;if(!(c!==void 0&&c.dep===s)){var u=void 0,a=4&f.flags;if(a&&(u=c!==void 0?c.nextDep:f.deps)!==void 0&&u.dep===s)return void(f.depsTail=u);var h=s.subsTail;if(!(h!==void 0&&h.sub===f&&(!a||l(h,f)))){var E=f.depsTail=s.subsTail={dep:s,sub:f,prevDep:c,nextDep:u,prevSub:h,nextSub:void 0};u!==void 0&&(u.prevDep=E),c!==void 0?c.nextDep=E:f.deps=E,h!==void 0?h.nextSub=E:s.subs=E}}},unlink:i,propagate:function(s){var f,c=s.nextSub;e:for(;;){var u=s.sub,a=u.flags;if(3&a&&(60&a?12&a?4&a?48&a||!l(s,u)?a=0:(u.flags=40|a,a&=1):u.flags=-9&a|32:a=0:u.flags=32|a,2&a&&n(u),1&a)){var h=u.subs;if(h!==void 0){s=h,h.nextSub!==void 0&&(f={value:c,prev:f},c=s.nextSub);continue}}if((s=c)===void 0){for(;f!==void 0;)if(s=f.value,f=f.prev,s!==void 0){c=s.nextSub;continue e}break}c=s.nextSub}},checkDirty:function(s,f){var c,u=0;e:for(;;){var a=s.dep,h=a.flags,E=!1;if(16&f.flags)E=!0;else if(17&~h){if(!(33&~h)){s.nextSub===void 0&&s.prevSub===void 0||(c={value:s,prev:c}),s=a.deps,f=a,++u;continue}}else if(e(a)){var S=a.subs;S.nextSub!==void 0&&o(S),E=!0}if(E||s.nextDep===void 0){for(;u;){--u;var R=f.subs,D=R.nextSub!==void 0;if(D?(s=c.value,c=c.prev):s=R,E){if(e(f)){D&&o(R),f=s.sub;continue}}else f.flags&=-33;if(f=s.sub,s.nextDep!==void 0){s=s.nextDep;continue e}E=!1}return E}s=s.nextDep}},endTracking:function(s){for(var f=s.depsTail,c=f!==void 0?f.nextDep:s.deps;c!==void 0;)c=i(c,s);s.flags&=-5},startTracking:function(s){s.depsTail=void 0,s.flags=-57&s.flags|4},shallowPropagate:o};function i(s,f){f===void 0&&(f=s.sub);var c=s.dep,u=s.prevDep,a=s.nextDep,h=s.nextSub,E=s.prevSub;return a!==void 0?a.prevDep=u:f.depsTail=u,u!==void 0?u.nextDep=a:f.deps=a,h!==void 0?h.prevSub=E:c.subsTail=E,E!==void 0?E.nextSub=h:(c.subs=h)===void 0&&r(c),a}function o(s){do{var f=s.sub,c=s.nextSub,u=f.flags;(48&u)==32&&(f.flags=16|u,2&u&&n(f)),s=c}while(s!==void 0)}function l(s,f){var c=f.depsTail;if(c!==void 0){var u=f.deps;do{if(u===s)return!0;if(u===c)break;u=u.nextDep}while(u!==void 0)}return!1}}(w=at||(at={}))[w.None=0]="None",w[w.Mutable=1]="Mutable",w[w.Watching=2]="Watching",w[w.RecursedCheck=4]="RecursedCheck",w[w.Recursed=8]="Recursed",w[w.Dirty=16]="Dirty",w[w.Pending=32]="Pending";var k,N,$e=[],K=cn({update:function(t){return"getter"in t?St(t):_t(t,t.value)},notify:function t(e){var n=e.flags;if(!(64&n)){e.flags=64|n;var r=e.subs;r!==void 0?t(r.sub):$e[je++]=e}},unwatched:function(t){if("getter"in t){var e=t.deps;if(e!==void 0){t.flags=17;do e=Ge(e,t);while(e!==void 0)}}else"previousValue"in t||Qe.call(t)}}),z=K.link,Ge=K.unlink,fn=K.propagate,bt=K.checkDirty,vt=K.endTracking,Lt=K.startTracking,Tt=K.shallowPropagate,pe=0,je=0;function F(t){var e=k;return k=t,e}function lt(t){var e=N;return N=t,e}function Mt(t){return yn.bind({previousValue:t,value:t,subs:void 0,subsTail:void 0,flags:1})}function ut(t){return pn.bind({value:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:17,getter:t})}function mn(t){var e={fn:t,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};k!==void 0?z(e,k):N!==void 0&&z(e,N);var n=F(e);try{e.fn()}finally{F(n)}return Qe.bind(e)}function hn(t){var e={deps:void 0,depsTail:void 0,subs:void 0,subsTail:void 0,flags:0};N!==void 0&&z(e,N);var n=F(void 0),r=lt(e);try{t()}finally{lt(r),F(n)}return Qe.bind(e)}function St(t){var e=F(t);Lt(t);try{var n=t.value;return n!==(t.value=t.getter(n))}finally{F(e),vt(t)}}function _t(t,e){return t.flags=1,t.previousValue!==(t.previousValue=e)}function Rt(t,e){if(16&e||32&e&&bt(t.deps,t)){var n=F(t);Lt(t);try{t.fn()}finally{F(n),vt(t)}}else{32&e&&(t.flags=-33&e);for(var r=t.deps;r!==void 0;){var i=r.dep,o=i.flags;64&o&&Rt(i,i.flags=-65&o),r=r.nextDep}}}function dn(){for(;pe<je;){var t=$e[pe];$e[pe++]=void 0,Rt(t,t.flags&=-65)}pe=0,je=0}function pn(){var t=this.flags;if(16&t||32&t&&bt(this.deps,this)){if(St(this)){var e=this.subs;e!==void 0&&Tt(e)}}else 32&t&&(this.flags=-33&t);return k!==void 0?z(this,k):N!==void 0&&z(this,N),this.value}function yn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t.length){var n=this.value;return 16&this.flags&&_t(this,n)&&(r=this.subs)!==void 0&&Tt(r),k!==void 0&&z(this,k),n}var r,i=t[0];this.value!==(this.value=i)&&(this.flags=17,(r=this.subs)!==void 0&&(fn(r),dn()))}function Qe(){for(var t=this.deps;t!==void 0;)t=Ge(t,this);var e=this.subs;e!==void 0&&Ge(e),this.flags=0}var gn={};function Se(t,e){return Object.is(t,e)||!V(t,e)?e:typeof t=="object"&&typeof e=="object"&&t!==null&&e!==null?Array.isArray(t)&&Array.isArray(e)?[...t,...e]:Reflect.ownKeys(t).reduce((n,r)=>(n[r]=Se(t[r],e[r]),n),{...t,...e}):e??t}function wt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}function En(t){let e,n=[];return function(...r){if(!e)return e=new t(...r),n=r,e;if(wt(n,r))return e;throw Error(`can not create instance from new ${t.name}`)}}J(gn,{deepClone:()=>re,hasDiff:()=>V,isSame:()=>wt,merge:()=>Se,singleton:()=>En});const V=(t,e,n=(r,i,o)=>!0)=>{var s;if(!t&&e||t&&!e)return!0;if(!t&&!e)return!Object.is(t,e);const r=typeof t,i=typeof e,o=Array.isArray(t),l=Array.isArray(e);if(r!==i||o&&!l||!o&&l)return!0;if(o&&l)return t.length!==e.length||t.some((f,c)=>V(f,e[c],n));if(r==="object"){if(Symbol.iterator in t&&!(Symbol.iterator in e)||!(Symbol.iterator in t)&&Symbol.iterator in e)return!0;if(Symbol.iterator in t&&Symbol.iterator in e){const u=[],a=[];for(const h of t)u.push(h);for(const h of e)a.push(h);return V(u,a,n)}if(t instanceof Date)return t.getTime()!==((s=e.getTime)==null?void 0:s.call(e));if(t instanceof RegExp)return t.source!==e.source||t.flags!==e.flags;const f=Reflect.ownKeys(t),c=Reflect.ownKeys(e);return f.length!==c.length||Object.keys(t).some(u=>n(u,t[u],e[u])&&V(t[u],e[u],n))}return!Object.is(t,e)};function re(t){const e=new WeakMap;return function n(r){if(r===null||typeof r!="object")return r;if(e.has(r))return e.get(r);const i=r.constructor,o=new i(i===Object?void 0:r);e.set(r,o);const l=Reflect.ownKeys(r);for(const s of l)o[s]=n(r[s]);return o}(t)}const q=Symbol("raw"),ye={Map,Set,Array},bn={Map:["set","delete","clear"],Set:["add","delete","clear"],Array:["push","pop","shift","unshift","splice","sort","reverse"]};function Ke(t,e){const n={get(r,i,o){let l=o;Object.keys(ye).some(f=>r instanceof ye[f])&&(l=t);const s=Reflect.get(r,i,l);return typeof s=="function"?Object.keys(ye).map(f=>function(c,u,a,h,E,S){if(c instanceof S&&bn[E].includes(u))return function(...R){const D=Reflect.apply(a,c,R);return h(re(c)),D}}(r,i,s,e,f,ye[f])).filter(f=>!!f).at(0)??s.bind(r):typeof s=="object"&&s!==null?Ke(s,f=>{const c=re(r);c[i]=f,e(c)}):s},set(r,i,o){const l=Reflect.set(r,i,o);return e(re(r)),l}};return new Proxy(t,n)}function Ht(t){if(typeof t!="function")return t;const e=Reflect.get(t,q)||t[q];return e!==void 0?e:t}const Pt=Symbol("ref"),At="ref";function vn(t){const e=t==null?void 0:t[Pt];return typeof t=="function"&&"value"in t&&Object.is(At,e)}function Mr(t){if(vn(t))return t;const e=Mt(t=Ht(t));return Reflect.defineProperty(e,"value",{get(){const n=e();return typeof n=="object"&&n!==null?Ke(n,e):n},set(n){e(n),Reflect.set(e,q,e())}}),Reflect.defineProperty(e,Pt,{configurable:!1,writable:!1,value:At}),Reflect.defineProperty(e,q,{value:t}),e}const Ct=Symbol("reactive"),xt="reactive";function Ln(t){const e=t==null?void 0:t[Ct];return typeof t=="function"&&Object.is(xt,e)}function Sr(t){if(Ln(t))return t;const e=Mt(t=Ht(t)),n=r=>{const i=Array.isArray(r)?r:{...e(),...r};e(i),Reflect.set(e,q,e())};return Reflect.defineProperty(e,Ct,{configurable:!1,writable:!1,value:xt}),Reflect.defineProperty(e,q,{value:t}),new Proxy(e,{get(r,i,o){const l=Reflect.get(r(),i,o);return i===q?l:typeof l=="object"&&l!==null?Ke(l,s=>n({[i]:s})):l},set:(r,i,o)=>(n({[i]:o}),!0),deleteProperty(r,i){const o={...r()};return Reflect.deleteProperty(o,i),e(o),!0},defineProperty(r,i,o){const l={...r()};return Reflect.defineProperty(l,i,o),e(l),!0},apply(r,i,o){if(o.length===0)return Reflect.apply(r,i,o);n(o[0])}})}const ct=function(){const t=new Map,e=(r,i=!1)=>r.map(o=>i?typeof o:o).join("-")||"[[none-args]]";function n(...r){const i=t.get(e(r,!0));if(typeof i!="function")throw new TypeError("the function must have a implement at least");return i.apply(null,r)}return n.addImp=function(...r){const i=r.pop();if(typeof i!="function")throw new TypeError("the last args must be a function");t.set(e(r),i)},n}();ct.addImp("function",function(t){const e=ut(t);return Reflect.defineProperty(e,"value",{get:()=>e()}),e}),ct.addImp("object",function(t){const e=ut(t.get);return Reflect.defineProperty(e,"value",{get:()=>e(),set(n){t.set(n)}}),e});var U={};J(U,{isES6Promise:()=>Tn,isFunction:()=>L,isIterable:()=>Ve,isObject:()=>A,isThenable:()=>Ot});const A=t=>typeof t=="object"&&t!==null,L=t=>typeof t=="function",Ot=t=>(A(t)||L(t))&&L(t.then),Tn=t=>Ot(t)&&t instanceof Promise,Ve=t=>A(t)&&Symbol.iterator in t&&L(t[Symbol.iterator]);function _(t){const e=L(t)?t():t;return typeof e=="object"&&e!==null?re(e):e}function be(t){return hn(()=>{mn(t)})}function P(t,e,n,r=!1){if(!r&&L(e)){const i=be(()=>{e(_(t))});Array.isArray(n)&&n.push(i)}}function Ae(t,e,n,r=!1,i=(l,s)=>Object.is(l,s),o=(l,s)=>l){const l={value:void 0};return l.value=_(t),P(t,s=>{i(s,l.value)||(e(s,l.value),l.value=o(s,l.value))},n,r),l}var Oe,W=(Oe=class extends HTMLElement{constructor(e=[]){super();m(this,"initialChildren");this.initialChildren=e}connectedCallback(){var n;if(!((n=this.initialChildren)!=null&&n.length))return;const e=document.createDocumentFragment();for(const r of this.initialChildren){const i=oe(r);if(i){if(Re(i))continue;e.append(i)}}this.appendChild(e)}disconnectedCallback(){}},m(Oe,"name","router-view"),Oe),Be={};J(Be,{EVENTS:()=>le,EventBus:()=>ae});const O=new Map;var ae=class{static on(t,e){const n=O.get(t);n&&n.push(e),O.set(t,n||[e])}static off(t,e){const n=O.get(t);e&&n&&n.length!==0?O.set(t,n.filter(r=>r!==e)):O.delete(t)}static once(t,e){const n=r=>{e(r),this.off(t,n)};this.on(t,n)}static emit(t,e){const n=O.get(t);n&&n.forEach(r=>{r(e)})}static has(t){return O.has(t)}static get size(){return O.size}static listenerCount(t){var e;return((e=O.get(t))==null?void 0:e.length)||0}};const le={APP_MOUNTED:"app-mounted",__INTERNAL_UPDATE:"__internal_update"},Mn="Domily App",Sn="SPA",_n="#app",ft="___$domily-list-map-key",ke=Symbol("DOM_WILL_TELEPORT_TO");var ze=class Dt{constructor(e){m(this,"tag");m(this,"id");m(this,"className");m(this,"to");m(this,"css");m(this,"style");m(this,"props");m(this,"attrs");m(this,"text");m(this,"html");m(this,"children");m(this,"on");m(this,"domIf");m(this,"domShow");m(this,"mapList");m(this,"key");m(this,"mappedSchemaList",[]);m(this,"mappedDOMList",[]);m(this,"customElement",{enable:void 0,name:void 0,useShadowDOM:!1,shadowDOMMode:"open"});m(this,"__dom",null);m(this,"beforeMount");m(this,"mounted");m(this,"updated");m(this,"beforeUnmount");m(this,"unmounted");m(this,"childLifeCycleQueue",[]);m(this,"_initialed",!1);m(this,"_internalEffectAborts",[]);m(this,"_internalDomIfRenderQueue",[]);m(this,"_internalDomIfRenderQueueExecuting",!1);m(this,"eventsAbortController",new Map);this.tag=e.tag,this.id=e.id,this.className=e.className,this.to=e.to,this.css=e.css,this.style=e.style,this.props=e.props,this.attrs=e.attrs,this.text=e.text,this.html=e.html,this.children=e.children,this.on=this.handleEvents(e.on),this.domIf=this.handleDIf(e.domIf),this.domShow=this.handleDShow(e.domShow),this.mapList=e.mapList,this.key=e.key,this.customElement=Se(this.customElement,e.customElement),this.handleLifeCycle(e)}static create(e){return new Dt(e)}async executeQueueRender(){if(!this._internalDomIfRenderQueueExecuting){for(this._internalDomIfRenderQueueExecuting=!0;this._internalDomIfRenderQueue.length;){const e=this._internalDomIfRenderQueue.shift();typeof e=="function"&&await e()}this._internalDomIfRenderQueueExecuting=!1}}handleLifeCycle(e){this.beforeMount=n=>{const r=[];return e.beforeMount&&L(e.beforeMount)&&r.push(e.beforeMount(n)),this.childLifeCycleQueue.forEach(i=>{i.beforeMount&&L(i.beforeMount)&&r.push(i.beforeMount(i.dom))}),Promise.allSettled(r)},this.mounted=n=>{e.mounted&&L(e.mounted)&&e.mounted(n),this.childLifeCycleQueue.forEach(r=>{r.mounted&&L(r.mounted)&&r.mounted(r.dom)})},this.updated=n=>{e.updated&&L(e.updated)&&e.updated(n),this.childLifeCycleQueue.forEach(r=>{r.updated&&L(r.updated)&&r.updated(r.dom)})},this.beforeUnmount=n=>{const r=[];return e.beforeUnmount&&L(e.beforeUnmount)&&r.push(e.beforeUnmount(n)),this.childLifeCycleQueue.forEach(i=>{i.beforeUnmount&&L(i.beforeUnmount)&&r.push(i.beforeUnmount(i.dom))}),Promise.allSettled(r)},this.unmounted=()=>{this.childLifeCycleQueue.forEach(n=>{n.unmounted&&L(n.unmounted)&&n.unmounted()}),e.unmounted&&L(e.unmounted)&&e.unmounted()}}runLifecycle(e){(e!=="updated"||this._initialed)&&L(this[e])&&this[e](this.__dom)}handleEventsOption(e,n){return e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),{...e,signal:n.signal}}handleEvents(e){if(e)return Object.fromEntries(Object.keys(e).map(n=>{const r=e[n],i=new AbortController;if(this.eventsAbortController.set(n,i),typeof r=="function")return[n,{event:r,option:{signal:i.signal}}];if(typeof r=="object"&&r!==null){if("option"in r){const o=typeof r.option=="boolean"?{capture:r.option,signal:i.signal}:this.handleEventsOption(r.option,i);return[n,{event:r.event,option:o}]}return[n,{event:r,option:{signal:i.signal}}]}return[]}).filter(n=>n.length))}handleDIf(e){return()=>e===void 0||(typeof e=="function"?e():e)}handleDShow(e){return()=>e===void 0||(typeof e=="function"?e():e)}handleCustomElement(e){const{enable:n,name:r,useShadowDOM:i,shadowDOMMode:o,css:l}=this.customElement||{};if(!n||!r)return e;let s=null;l&&(s=ne(_(l)),P(l,u=>{const a=ne(u);s&&a&&s.innerText===a.innerText||(s=x(s,a),this.runLifecycle("updated"))},this._internalEffectAborts));const f=class extends HTMLElement{constructor(a,h){super();m(this,"shadowRoot",null);m(this,"child",null);m(this,"styleTag",null);this.child=a,this.styleTag=h,i&&(this.shadowRoot=this.attachShadow({mode:o||"open"}))}connectedCallback(){const a=this.shadowRoot??this;this.styleTag&&a.appendChild(this.styleTag),this.child&&a.appendChild(this.child)}},c=customElements.get(r);return c?new c(e,s):(customElements.define(r,f),new f(e,s))}domWithKey(e){let n=_(this.key);return n&&(Reflect.set(e,ft,n),P(this.key,r=>{if(Object.is(n,r)||!this.__dom||!_(this.domIf))return;const i=this.__dom,o=this.render();this.__dom=x(i,o),this.__dom&&Reflect.set(this.__dom,ft,r),this.runLifecycle("updated"),n=r},this._internalEffectAborts)),e}domInterrupter(e){if(!e)return this._initialed=!0,e;const n=this.domWithKey(this.handleCustomElement(e));return this._initialed=!0,n}updateDOMList(e,n){var i;if(!this.__dom||!_(this.domIf))return;this.mappedDOMList.forEach(o=>{fe(o)}),this.mappedSchemaList=[],this.mappedDOMList=[];const r=document.createDocumentFragment();if(Ve(n)&&L(e)){let o=0;for(const l of n){const s=e.apply(n,[l,o++]);this.mappedSchemaList.push(s);const f=oe(s,this.childLifeCycleQueue,this._internalEffectAborts);f&&(this.mappedDOMList.push(f),r.appendChild(f))}}(i=this.__dom)==null||i.appendChild(r),this.runLifecycle("updated")}gatherInternalEffectAborts(e){for(const n of this._internalEffectAborts)L(n)&&e.push(n)}abortEffect(){for(const e of this._internalEffectAborts)L(e)&&e();this._internalEffectAborts=[]}initialRenderStatus(){this.childLifeCycleQueue=[],this.mappedSchemaList=[],this.mappedDOMList=[],this.abortEffect()}render(){var s,f,c;if(this.initialRenderStatus(),this.mapList){let u=_(this.mapList.list);if(P(this.mapList.list,a=>{var h;V(u,a,(E,S,R)=>E!=="key"||!Object.is(S,R))&&(this.updateDOMList((h=this.mapList)==null?void 0:h.map,a),u=a)},this._internalEffectAborts),Ve(u)&&L((s=this.mapList)==null?void 0:s.map)){let a=0;for(const h of u){const E=this.mapList.map.apply(u,[h,a++]);this.mappedSchemaList?this.mappedSchemaList.push(E):this.mappedSchemaList=[E]}}}let e=_(this.domIf);if(P(this.domIf,u=>{this._internalDomIfRenderQueue.push(async()=>{var E;const a=()=>{this.__dom=this.domInterrupter(x(this.__dom,te("dom-if")))},h=()=>{const S=this.__dom,R=this.render();this.__dom=x(S,R)};e!==u&&((E=this.__dom)!=null&&E.isConnected)&&(u?await ue(this.beforeMount,()=>{h(),typeof this.mounted=="function"&&this.mounted(this.__dom)},[this.__dom]):await ue(this.beforeUnmount,()=>{a(),typeof this.unmounted=="function"&&this.unmounted()},[this.__dom]),e=u)}),this.executeQueueRender()},this._internalEffectAborts),!e)return this.__dom=this.domInterrupter(te("dom-if")),this.__dom;const n=Ae(this.domShow,u=>{this.__dom&&"style"in this.__dom&&(this.__dom.style.cssText=ge(this.__dom.style.cssText,!u),this.runLifecycle("updated"))},this._internalEffectAborts);if(this.tag==="text"){const u=Ae(this.text,a=>{this.__dom=this.domInterrupter(x(this.__dom,ve(n.value?a:void 0))),this.runLifecycle("updated")},this._internalEffectAborts);return this.__dom=this.domInterrupter(ve(n.value?u.value:void 0)),this.__dom}if(this.tag==="comment"){const u=Ae(this.text,a=>{this.__dom=this.domInterrupter(x(this.__dom,te(n.value?a:'"domily-comment-hidden"'))),this.runLifecycle("updated")},this._internalEffectAborts);return this.__dom=this.domInterrupter(te(u.value??"domily-comment")),this.__dom}let r=ne(_(this.css));P(this.css,u=>{const a=ne(u);r&&a&&r.innerText===a.innerText||(r=x(r,a),this.runLifecycle("updated"))},this._internalEffectAborts);let i=ge(_(this.style),!n.value);P(this.style,u=>{const a=ge(u,!n.value);i!==a&&(this.__dom&&"style"in this.__dom&&(this.__dom.style.cssText=typeof a=="string"?a:"",this.runLifecycle("updated")),i=a)},this._internalEffectAborts);let o=((f=this.children)==null?void 0:f.map(u=>oe(u,this.childLifeCycleQueue,this._internalEffectAborts)).filter(u=>!!u))||[];this.mappedDOMList=((c=this.mappedSchemaList)==null?void 0:c.map(u=>oe(u,this.childLifeCycleQueue,this._internalEffectAborts)).filter(u=>!!u))||[],this.mappedDOMList.length&&(o=o.concat(this.mappedDOMList)),r&&o.unshift(r);const l={...(()=>{let u=_(this.props);return P(this.props,a=>{V(u,a)&&this.__dom&&a&&(Object.keys(a).forEach(h=>{Reflect.set(this.__dom,h,a[h])}),this.runLifecycle("updated"),u=a)},this._internalEffectAborts),u})(),...this.id?{id:(()=>{let u=_(this.id);return P(this.id,a=>{a!==u&&(this.__dom&&(Reflect.set(this.__dom,"id",a),this.runLifecycle("updated")),u=a)},this._internalEffectAborts),u})()}:{},...this.className?{className:(()=>{let u=_(this.className);return P(this.className,a=>{a!==u&&(this.__dom&&(et(this.__dom,this.tag,a),this.runLifecycle("updated")),u=a)},this._internalEffectAborts),u})()}:{},...this.html?{innerHTML:(()=>{let u=_(this.html);return P(this.html,a=>{a!==u&&(this.__dom&&(Reflect.set(this.__dom,"innerHTML",a),this.runLifecycle("updated")),u=a)},this._internalEffectAborts),u})()}:this.text?{innerText:(()=>{let u=_(this.text);return P(this.text,a=>{a!==u&&(this.__dom&&(Reflect.set(this.__dom,"innerText",a),this.runLifecycle("updated")),u=a)},this._internalEffectAborts),u})()}:{},attrs:(()=>{let u=_(this.attrs);return P(this.attrs,a=>{V(u,a)&&this.__dom&&a&&(Object.keys(a).forEach(h=>{this.__dom.setAttribute(h,a[h])}),this.runLifecycle("updated"),u=a)},this._internalEffectAborts),u})(),style:i,on:this.on};if([ee.name,"fragment"].includes(this.tag))this.__dom=this.domInterrupter(se(()=>Nt(o),l,void 0,this._internalEffectAborts,()=>this.runLifecycle("updated")));else if(this.tag===W.name)this.__dom=this.domInterrupter(se(()=>Ft(o),l,void 0,this._internalEffectAborts,()=>this.runLifecycle("updated")));else if(this.tag==="rich-text"){const u=l.innerHTML;delete l.innerHTML,this.__dom=this.domInterrupter(se(()=>It({html:u}),l,void 0,this._internalEffectAborts,()=>this.runLifecycle("updated")))}else this.__dom=this.domInterrupter(Te(this.tag,l,o,this._internalEffectAborts,()=>this.runLifecycle("updated")));return this.__dom}};function $t(t){return nt(ze.create(t))}function Rn(t,e,n){return n&&!customElements.get(e)&&customElements.define(e,n),Reflect.set(t,e,r=>$t({...r,tag:e})),t}function Gt(t){return t instanceof ze||"render"in t&&"tag"in t&&L(t.render)&&typeof t.tag=="string"&&!!t.tag.trim()}function jt(t){return A(t)&&"schema"in t&&A(t.schema)&&Gt(t.schema)&&"mount"in t&&L(t.mount)&&"unmount"in t&&L(t.unmount)}function X(t,e){A(t)&&L(e==null?void 0:e.beforeMount)&&(t.beforeMount=e.beforeMount),A(t)&&L(e==null?void 0:e.mounted)&&(t.mounted=e.mounted),A(t)&&L(e==null?void 0:e.updated)&&(t.updated=e.updated),A(t)&&L(e==null?void 0:e.beforeUnmount)&&(t.beforeUnmount=e.beforeUnmount),A(t)&&L(e==null?void 0:e.unmounted)&&(t.unmounted=e.unmounted)}function ie(t,e,n){if(!t)return null;if(L(t)){let i=ie(t());const o=be(()=>{const l=ie(t());ae.emit(le.__INTERNAL_UPDATE,{nextSchema:l,originalSchema:i}),i=l});return X(e,i),Array.isArray(n)&&n.push(o),i}if(Gt(t))return X(e,t),t;if(A(r=t)&&"name"in r&&typeof r.name=="string"&&r.name.trim()&&"customElementComponent"in r&&A(r.customElementComponent)&&"tag"in r.customElementComponent&&typeof r.customElementComponent.tag=="string"&&r.customElementComponent.tag.trim()){const i=ie(t.customElementComponent);return i?(i.customElement=Se({enable:!0,name:t.name},i.customElement),X(e,i),i):null}var r;if(jt(t))return X(e,t.schema),t.schema;if(function(i){return A(i)&&"tag"in i&&typeof i.tag=="string"&&!!i.tag.trim()}(t)){const i=ze.create(t);return X(e,i),i}return null}function Vt(t){if(!t)return null;if(jt(t))return t;const e=ie(t);return e?nt(e):null}function oe(t,e,n){if(!t)return null;if(t instanceof HTMLElement||t instanceof Node)return t;if(typeof t=="string")return ve(t);if(L(t)){const l=t();if(l instanceof HTMLElement||l instanceof Node)return l}const r={dom:null},i=ie(t,r,n);if(!i)return null;const o=i.render();return r.dom=o,Array.isArray(e)&&e.push(r),Array.isArray(n)&&i.gatherInternalEffectAborts(n),o&&i.to&&Reflect.defineProperty(o,ke,{writable:!0,configurable:!0,value:i.to}),o}ae.has(le.__INTERNAL_UPDATE)||ae.on(le.__INTERNAL_UPDATE,({nextSchema:t,originalSchema:e})=>{var n;e&&(e.__dom=x(e.__dom,((n=t==null?void 0:t.render)==null?void 0:n.call(t))||null))});var De,ee=(De=class extends HTMLElement{constructor(e=[]){super();m(this,"initialChildren");this.initialChildren=e}connectedCallback(){var n;if(!((n=this.initialChildren)!=null&&n.length))return;const e=document.createDocumentFragment();for(const r of this.initialChildren){const i=oe(r);if(i){if(Re(i))continue;e.append(i)}}this.appendChild(e)}},m(De,"name","domily-fragment"),De),wn={};J(wn,{$:()=>_e,$$:()=>Ye,$children:()=>On,$dispatch:()=>Cn,$dispatchEvent:()=>xn,$el:()=>Je,$item:()=>Hn,$option:()=>Pn,$optionIncludes:()=>An,KebabToCamel:()=>Nn,addCSS:()=>Dn,addClass:()=>Gn,c:()=>te,camelToKebab:()=>Xe,cssObjectToText:()=>Le,domMountToParent:()=>tt,ensurePromiseOrder:()=>ue,f:()=>Nt,h:()=>Te,handleCSS:()=>ne,handleHiddenStyle:()=>ge,internalCreateElement:()=>se,isSvgDOM:()=>Wt,isSvgTag:()=>Ze,mountable:()=>nt,noop:()=>Ne,parseAttribute:()=>Fe,removeCSS:()=>$n,removeClass:()=>jn,removeDOM:()=>fe,replaceDOM:()=>x,rt:()=>It,rv:()=>Ft,setCssVar:()=>kn,setDOMClassNames:()=>et,svgNamespace:()=>kt,teleportChildren:()=>Ut,teleportDOM:()=>Re,toggleClass:()=>Vn,txt:()=>ve});const Ne=()=>{},kt="http://www.w3.org/2000/svg";function _e(t,e=document){return e.querySelector(t)}function Ye(t,e=document){return Array.from(e.querySelectorAll(t))}function Je(t,e=document){return typeof t=="string"?e.querySelector(t):t}function Hn([t,e],n=document){var r;return Array.from(((r=_e(t,n))==null?void 0:r.children)||[]).at(e)}function Pn([t,e,n],r=document){return Ye(t,r).find(i=>i[e]===n)}function An([t,e,n],r=document){return Ye(t,r).find(i=>`${i[e]}`.includes(n)||n.includes(i[e]))}function Cn([t,e],n=document){var r;return(r=typeof t=="string"?_e(t,n):t)==null?void 0:r.dispatchEvent(e)}function xn([t,e],n=document){var r;return(r=typeof t=="string"?_e(t,n):t)==null?void 0:r.dispatchEvent(e)}function On(t,e=n=>!!n){const n=t==null?void 0:t.children;return n?Array.from(n).filter(e):[]}function Dn(t,e=`global-customer-css-${Date.now()}`,n=document){const r=document.createElement("style");r.id=e;const i=document.createTextNode(t);return r.appendChild(i),n===document?n.head.appendChild(r):n.insertBefore(r,n.firstChild),r}function $n(t,e=document){var n;if(typeof t=="string"){const r=(e===document?e.head:e).querySelector(`#${t}`);r==null||r.remove()}else(n=t==null?void 0:t.remove)==null||n.call(t)}function Gn(t,e){const n=Array.isArray(e)?e:[e],r=typeof t=="string"?document.querySelector(t):t;r&&n.forEach(i=>{var o,l,s,f;(l=(o=r==null?void 0:r.classList)==null?void 0:o.contains)!=null&&l.call(o,i)||((f=(s=r==null?void 0:r.classList)==null?void 0:s.add)==null||f.call(s,i))})}function jn(t,e){const n=Array.isArray(e)?e:[e],r=typeof t=="string"?document.querySelector(t):t;r&&n.forEach(i=>{var o,l;(l=(o=r==null?void 0:r.classList)==null?void 0:o.contains)!=null&&l.call(o,i)&&r.classList.remove(i)})}function Vn(t,e){const n=Array.isArray(e)?e:[e],r=typeof t=="string"?document.querySelector(t):t;r&&n.forEach(i=>{var o,l,s,f;(l=(o=r==null?void 0:r.classList)==null?void 0:o.contains)!=null&&l.call(o,i)?r.classList.remove(i):(f=(s=r==null?void 0:r.classList)==null?void 0:s.add)==null||f.call(s,i)})}function kn(t,e,n=document.documentElement,r){return n||console.log(`[setCssVar ${t}: ${e} error] dom may not exist`,n),(Array.isArray(n)?n:[n]).forEach(i=>{var o;typeof i=="string"?(o=document.querySelector(i))==null||o.style.setProperty(t,e,r):i==null||i.style.setProperty(t,e,r)})}function Xe(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")}function Nn(t){return t.split("-").filter(e=>e).map((e,n)=>n===0?e.toLowerCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("")}function Fe(t){return t==="null"?null:t==="'null'"||t==='"null"'?"null":t!=="undefined"?t==="'undefined'"||t==='"undefined"'?"undefined":t==="true"||(t==="'true'"||t==='"true"'?"true":t!=="false"&&(t==="'false'"||t==='"false"'?"false":/^\d+$/.test(t)?Number(t):t)):void 0}function Nt(t=[]){const e=customElements.get(ee.name);return e?new e(t):(customElements.define(ee.name,ee),new ee(t))}function Ft(t=[]){const e=customElements.get(W.name);return e?new e(t):(customElements.define(W.name,W),new W)}function It(t){const e=document.createElement("template");return e.innerHTML=t.html,document.importNode(e.content,!0).firstElementChild}function te(t){return t===void 0&&(t=""),typeof t=="number"&&(t=String(t)),document.createComment(t)}function ve(t){return t===void 0&&(t=""),typeof t=="number"&&(t=String(t)),document.createTextNode(t)}function Le(t){return typeof t!="string"&&t?Object.entries(t).map(([e,n])=>`${Xe(e)}:${n}`).join(";"):t}function Re(t){if(typeof t!="object"||!t)return!1;const e=Reflect.get(t,ke)||t[ke];return!!e&&(tt(t,e),!0)}function Ut(t){const e=document.createDocumentFragment();for(let n=0;n<t.length;n++){const r=t[n];Re(r)||e.append(r)}return e}function se(t,e,n,r,i){const o=t();return e&&Object.entries(e).forEach(([l,s])=>{if(l==="attrs"&&typeof s=="object"&&s!==null)Object.entries(s).forEach(([f,c])=>{o.setAttribute(f,_(c));const u=be(()=>{const a=_(c);a===void 0?o.removeAttribute(f):o.setAttribute(f,a),typeof i=="function"&&i()});Array.isArray(r)&&r.push(u)});else if(l==="on"&&typeof s=="object"&&s!==null)Object.entries(s).forEach(([f,c])=>{const u=typeof c=="function"?c.bind(o):typeof c=="object"&&c!==null&&"event"in c&&typeof c.event=="function"?c.event.bind(o):typeof c=="object"&&c!==null&&"handleEvent"in c&&typeof c.handleEvent=="function"?c.handleEvent.bind(o):()=>{},a=typeof c=="object"&&c!==null&&"option"in c?c.option:void 0;o.addEventListener(f,u,a)});else if(l==="style")if(typeof s=="object"&&s!==null){const f=Le(s);Reflect.set(o.style,"cssText",f)}else typeof s=="string"&&Reflect.set(o.style,"cssText",s);else if(l==="className")et(o,o.tagName,s);else if(l!=="attrs"&&l!=="on"&&l!=="style"){Reflect.set(o,l,_(s));const f=be(()=>{Reflect.set(o,l,_(s)),typeof i=="function"&&i()});Array.isArray(r)&&r.push(f)}}),n&&o.appendChild(Ut(Array.isArray(n)?n:[n])),o}function Ze(t){return typeof t=="string"&&(t==="svg"||t.startsWith("SVG:"))}function Wt(t){var e;return((e=t==null?void 0:t.dataset)==null?void 0:e.domType)==="svg"||(t==null?void 0:t.tagName)==="svg"}function et(t,e,n){Ze(e)||Wt(t)?Reflect.set(t.className,"baseVal",n):Reflect.set(t,"className",n)}function Te(t,e,n,r,i){return typeof t!="string"?null:se(Ze(t)?()=>{const o=document.createElementNS(kt,t.replace(/^SVG:/,""));return o.setAttribute("data-dom-type","svg"),o}:()=>document.createElement(t),e,n,r,i)}function ge(t,e){var n;return e?typeof t=="string"?`${t}${t.endsWith(";")?"":";"}display:none!important;`:Le({...t,display:"none!important"}):(n=Le(t))==null?void 0:n.replace(/display:\s?none\s?!important;?/,"")}function ne(t){if(!t)return null;if(typeof t=="string")return Te("style",null,document.createTextNode(t));if(!Object.keys(t).length)return null;function e(n){let r="";for(const[i,o]of Object.entries(n))(typeof o=="string"||typeof o=="number")&&(r+=`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`),typeof o=="object"&&(r+=`${i} {${e(o)}}`);return r.trim()}return Te("style",null,document.createTextNode(function(n){let r="";for(const[i,o]of Object.entries(n))r+=`${i} {${e(o)}}`;return r.trim()}(t)))}function tt(t,e=document.body){if(!t)return Ne;const n=Je(e);if(!n)return Ne;n.append(t)}function fe(t){if("remove"in t&&typeof t.remove=="function")t.remove();else if(t&&t.parentNode)t.parentNode.removeChild(t);else if("outerHTML"in t)t.outerHTML="";else{if(t.nodeName!=="#document-fragment")throw new Error("[DOMily] removeDOM is not supported in this environment");t.childNodes.forEach(e=>fe(e))}}function x(t,e){if(!t)return e;if(!e)return fe(t),e;if("replaceWith"in t&&typeof t.replaceWith=="function")return t.replaceWith(e),e;if(t&&t.parentNode)return t.parentNode.replaceChild(e,t),e;if("outerHTML"in t&&"outerHTML"in e)return t.outerHTML=e.outerHTML,e;throw new Error("[DOMily] replaceDOM is not supported in this environment")}function ue(t,e,n=[],r=[]){return Promise.resolve(typeof t=="function"?t.apply(null,n):void 0).finally(()=>{typeof e=="function"&&e.apply(null,r)})}function nt(t){return{schema:t,unmount:()=>{ue(t.beforeUnmount,()=>{t.__dom&&(fe(t.__dom),typeof t.unmounted=="function"&&t.unmounted())},[t.__dom])},mount:(e=document.body)=>{const n=t.__dom??t.render();ue(t.beforeMount,r=>{tt(r,t.to??e),typeof t.mounted=="function"&&t.mounted(r)},[n],[n])}}}var Fn={};J(Fn,{HTMLNodeNameMap:()=>qt,SVGElementNameMap:()=>Qt});const qt={text:Text,comment:Comment,a:HTMLAnchorElement,abbr:HTMLElement,address:HTMLElement,area:HTMLAreaElement,article:HTMLElement,aside:HTMLElement,audio:HTMLAudioElement,b:HTMLElement,base:HTMLBaseElement,bdi:HTMLElement,bdo:HTMLElement,blockquote:HTMLQuoteElement,body:HTMLBodyElement,br:HTMLBRElement,button:HTMLButtonElement,canvas:HTMLCanvasElement,caption:HTMLTableCaptionElement,cite:HTMLElement,code:HTMLElement,col:HTMLTableColElement,colgroup:HTMLTableColElement,data:HTMLDataElement,datalist:HTMLDataListElement,dd:HTMLElement,del:HTMLModElement,details:HTMLDetailsElement,dfn:HTMLElement,dialog:HTMLDialogElement,div:HTMLDivElement,dl:HTMLDListElement,dt:HTMLElement,em:HTMLElement,embed:HTMLEmbedElement,fieldset:HTMLFieldSetElement,figcaption:HTMLElement,figure:HTMLElement,footer:HTMLElement,form:HTMLFormElement,h1:HTMLHeadingElement,h2:HTMLHeadingElement,h3:HTMLHeadingElement,h4:HTMLHeadingElement,h5:HTMLHeadingElement,h6:HTMLHeadingElement,head:HTMLHeadElement,header:HTMLElement,hgroup:HTMLElement,hr:HTMLHRElement,html:HTMLHtmlElement,i:HTMLElement,iframe:HTMLIFrameElement,img:HTMLImageElement,input:HTMLInputElement,ins:HTMLModElement,kbd:HTMLElement,label:HTMLLabelElement,legend:HTMLLegendElement,li:HTMLLIElement,link:HTMLLinkElement,main:HTMLElement,map:HTMLMapElement,mark:HTMLElement,menu:HTMLMenuElement,meta:HTMLMetaElement,meter:HTMLMeterElement,nav:HTMLElement,noscript:HTMLElement,object:HTMLObjectElement,ol:HTMLOListElement,optgroup:HTMLOptGroupElement,option:HTMLOptionElement,output:HTMLOutputElement,p:HTMLParagraphElement,picture:HTMLPictureElement,pre:HTMLPreElement,progress:HTMLProgressElement,q:HTMLQuoteElement,rp:HTMLElement,rt:HTMLElement,ruby:HTMLElement,s:HTMLElement,samp:HTMLElement,script:HTMLScriptElement,search:HTMLElement,section:HTMLElement,select:HTMLSelectElement,slot:HTMLSlotElement,small:HTMLElement,source:HTMLSourceElement,span:HTMLSpanElement,strong:HTMLElement,style:HTMLStyleElement,sub:HTMLElement,summary:HTMLElement,sup:HTMLElement,table:HTMLTableElement,tbody:HTMLTableSectionElement,td:HTMLTableCellElement,template:HTMLTemplateElement,textarea:HTMLTextAreaElement,tfoot:HTMLTableSectionElement,th:HTMLTableCellElement,thead:HTMLTableSectionElement,time:HTMLTimeElement,title:HTMLTitleElement,tr:HTMLTableRowElement,track:HTMLTrackElement,u:HTMLElement,ul:HTMLUListElement,var:HTMLElement,video:HTMLVideoElement,wbr:HTMLElement},Qt={a:SVGAElement,animate:SVGAnimateElement,animateMotion:SVGAnimateMotionElement,animateTransform:SVGAnimateTransformElement,circle:SVGCircleElement,clipPath:SVGClipPathElement,defs:SVGDefsElement,desc:SVGDescElement,ellipse:SVGEllipseElement,feBlend:SVGFEBlendElement,feColorMatrix:SVGFEColorMatrixElement,feComponentTransfer:SVGFEComponentTransferElement,feComposite:SVGFECompositeElement,feConvolveMatrix:SVGFEConvolveMatrixElement,feDiffuseLighting:SVGFEDiffuseLightingElement,feDisplacementMap:SVGFEDisplacementMapElement,feDistantLight:SVGFEDistantLightElement,feDropShadow:SVGFEDropShadowElement,feFlood:SVGFEFloodElement,feFuncA:SVGFEFuncAElement,feFuncB:SVGFEFuncBElement,feFuncG:SVGFEFuncGElement,feFuncR:SVGFEFuncRElement,feGaussianBlur:SVGFEGaussianBlurElement,feImage:SVGFEImageElement,feMerge:SVGFEMergeElement,feMergeNode:SVGFEMergeNodeElement,feMorphology:SVGFEMorphologyElement,feOffset:SVGFEOffsetElement,fePointLight:SVGFEPointLightElement,feSpecularLighting:SVGFESpecularLightingElement,feSpotLight:SVGFESpotLightElement,feTile:SVGFETileElement,feTurbulence:SVGFETurbulenceElement,filter:SVGFilterElement,foreignObject:SVGForeignObjectElement,g:SVGGElement,image:SVGImageElement,line:SVGLineElement,linearGradient:SVGLinearGradientElement,marker:SVGMarkerElement,mask:SVGMaskElement,metadata:SVGMetadataElement,mpath:SVGMPathElement,path:SVGPathElement,pattern:SVGPatternElement,polygon:SVGPolygonElement,polyline:SVGPolylineElement,radialGradient:SVGRadialGradientElement,rect:SVGRectElement,script:SVGScriptElement,set:SVGSetElement,stop:SVGStopElement,style:SVGStyleElement,svg:SVGSVGElement,switch:SVGSwitchElement,symbol:SVGSymbolElement,text:SVGTextElement,textPath:SVGTextPathElement,title:SVGTitleElement,tspan:SVGTSpanElement,use:SVGUseElement,view:SVGViewElement};var In={};function Un(t,e,n){const r=Reflect.get(t,e);Reflect.defineProperty(t,e,{writable:!0,configurable:!0,value:function(...i){return typeof r!="function"?r:typeof n=="function"?r.apply(this,n.apply(this,i)):r.apply(this,i)}})}function Wn(t,e,n){const r=Reflect.get(t,e);Reflect.defineProperty(t,e,{writable:!0,configurable:!0,value:function(...i){return typeof r!="function"?r:(typeof n=="function"&&n.apply(this,i),r.apply(this,i))}})}function qn(t,e,n){const r=Reflect.get(t,e);Reflect.defineProperty(t,e,{writable:!0,configurable:!0,value:function(...i){if(typeof r!="function")return r;const o=r.apply(this,i);return typeof n=="function"&&n.apply(this,[...i,o]),o}})}function Qn(t,e,n){const r=Reflect.get(t,e);Reflect.defineProperty(t,e,{writable:!0,configurable:!0,value:function(...i){return typeof r!="function"?r:typeof n=="function"?n.apply(this,[...i,r.apply(this,i)]):r.apply(this,i)}})}J(In,{useOverrideAfter:()=>qn,useOverrideBefore:()=>Wn,useOverrideParams:()=>Un,useOverrideReturnValue:()=>Qn});const Ce=new WeakMap;function Ie(t,e,n=!1){const r=Ce.get(e),i=JSON.stringify(t);if(r&&!n){const l=r.get(i);if(l)return l}const o=Vt(e(t));return o?(r?(r.set(i,o),Ce.set(e,r)):Ce.set(e,new Map([[i,o]])),o):null}const Q=new Map;var Kn=class Kt{constructor(e,n){m(this,"el");m(this,"namespace");m(this,"title");m(this,"mode");m(this,"globalProperties");m(this,"render");this.namespace=(n==null?void 0:n.namespace)||Symbol(`domily-app-${Q.size+1}`),this.el=(n==null?void 0:n.el)||_n,this.title=(n==null?void 0:n.title)||Mn,this.mode=(n==null?void 0:n.mode)||Sn,this.globalProperties=(n==null?void 0:n.globalProperties)||{},this.render=r=>Vt(e(Object.assign({namespace:this.namespace},r))),Q.set(this.namespace,this)}static create(e,n){return new Kt(e,n)}use(e,n){return L(e.install)&&e.install.apply(e,[this,n]),this}destroy(){Q.delete(this.namespace)}defineCustomElement(e,n,r){var f;if(e=Xe(e),customElements.get(e))return void console.warn(`[Domily warn] Custom element ${e} already exists.`);const i=this.namespace,{useShadowDOM:o=!1,shadowDOMMode:l="open",observedAttributes:s=[]}=r||{};customElements.define(e,(f=class extends HTMLElement{constructor(){super();m(this,"shadowRoot",null);m(this,"mountable",null);o&&(this.shadowRoot=this.attachShadow({mode:l}))}connectedCallback(){const u=Object.fromEntries(Array.from(this.attributes).map(h=>[h.name,Fe(h.value)]));if(this.mountable=Ie({namespace:i,...u},n),!this.mountable)return void console.warn(`[Domily warn] Custom element ${e} render failed.`);const a=o&&this.shadowRoot?this.shadowRoot:this;this.mountable.mount(a)}disconnectedCallback(){var u;(u=this.mountable)==null||u.unmount()}attributeChangedCallback(){var h,E;const u=Object.fromEntries(Array.from(this.attributes).map(S=>[S.name,Fe(S.value)])),a=Ie({namespace:i,...u},n);(E=(h=this.mountable)==null?void 0:h.schema)!=null&&E.__dom&&a&&(this.mountable.schema.__dom=x(this.mountable.schema.__dom,a.schema.render()),L(this.mountable.schema.updated)&&this.mountable.schema.updated(this.mountable.schema.__dom))}},m(f,"observedAttributes",s),f))}};function Bt(t,e,n){const r=Kn.create(t,e);return{app:r,mount(i){const o=r.render(n);return o?(o.mount(i||r.el),ae.emit(le.APP_MOUNTED,Je(i||r.el)),()=>{o.unmount()}):null}}}function zt(t){return t||Q.size!==1?t?Q.get(t):void 0:Array.from(Q.values())[0]}function Bn(t){return e=function(){const r={createApp:Bt,render:$t,registerElement:(i,o)=>Rn(r,i,o)};return Object.keys(qt).forEach(i=>{r.registerElement(i)}),r.registerElement("svg"),Object.keys(Qt).forEach(i=>{r.registerElement(`SVG:${i}`)}),r.registerElement("router-view"),r.registerElement("fragment"),r.registerElement("rich-text"),r}(),(n=t)&&(Array.isArray(n)&&n.length?n.forEach(r=>{e.registerElement(r)}):typeof n=="object"&&n!==null&&Object.keys(n).forEach(r=>{const i=n[r];i?typeof i=="function"&&e.registerElement(r,i):e.registerElement(r)})),e;var e,n}Bn();const zn="modulepreload",Yn=function(t){return"/domily/"+t},mt={},Ee=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),f=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=l(n.map(c=>{if(c=Yn(c),c in mt)return;mt[c]=!0;const u=c.endsWith(".css"),a=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${a}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":zn,u||(h.as="script"),h.crossOrigin="",h.href=c,f&&h.setAttribute("nonce",f),document.head.appendChild(h),u)return new Promise((E,S)=>{h.addEventListener("load",E),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l}return i.then(l=>{for(const s of l||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})};function Jn(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:l}=t;let s,f;const c=async(a=!0)=>{await f};async function u(){if("serviceWorker"in navigator){if(s=await Ee(async()=>{const{Workbox:a}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:a}},[]).then(({Workbox:a})=>new a("/domily/sw.js",{scope:"/domily/",type:"classic"})).catch(a=>{l==null||l(a)}),!s)return;s.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),s.addEventListener("installed",a=>{a.isUpdate||r==null||r()}),s.register({immediate:e}).then(a=>{o?o("/domily/sw.js",a):i==null||i(a)}).catch(a=>{l==null||l(a)})}}return f=u(),c}const Xn=()=>({tag:"router-view"});var Zn=Object.create,{getPrototypeOf:er,defineProperty:ht,getOwnPropertyNames:tr}=Object,nr=Object.prototype.hasOwnProperty,rr=(t,e,n)=>{n=t!=null?Zn(er(t)):{};let r=ht(n,"default",{value:t,enumerable:!0});for(let i of tr(t))nr.call(r,i)||ht(r,i,{get:()=>t[i],enumerable:!0});return r},ir=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),or=ir(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenData=void 0,t.parse=h,t.compile=E,t.match=D,t.pathToRegexp=me,t.stringify=de;var e="/",n=y=>y,r=/^[$_\p{ID_Start}]$/u,i=/^[$\u200c\u200d\p{ID_Continue}]$/u,o="https://git.new/pathToRegexpError",l={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function s(y){return y.replace(/[{}()\[\]+?!:*]/g,"\\$&")}function f(y){return y.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}function*c(y){let p=[...y],d=0;function v(){let g="";if(r.test(p[++d]))for(g+=p[d];i.test(p[++d]);)g+=p[d];else if(p[d]==='"'){let b=d;for(;d<p.length;){if(p[++d]==='"'){d++,b=0;break}p[d]==="\\"?g+=p[++d]:g+=p[d]}if(b)throw new TypeError(`Unterminated quote at ${b}: ${o}`)}if(!g)throw new TypeError(`Missing parameter name at ${d}: ${o}`);return g}for(;d<p.length;){let g=p[d],b=l[g];if(b)yield{type:b,index:d++,value:g};else if(g==="\\")yield{type:"ESCAPED",index:d++,value:p[d++]};else if(g===":"){let M=v();yield{type:"PARAM",index:d,value:M}}else if(g==="*"){let M=v();yield{type:"WILDCARD",index:d,value:M}}else yield{type:"CHAR",index:d,value:p[d++]}}return{type:"END",index:d,value:""}}class u{constructor(p){this.tokens=p}peek(){if(!this._peek){let p=this.tokens.next();this._peek=p.value}return this._peek}tryConsume(p){let d=this.peek();if(d.type===p)return this._peek=void 0,d.value}consume(p){let d=this.tryConsume(p);if(d!==void 0)return d;let{type:v,index:g}=this.peek();throw new TypeError(`Unexpected ${v} at ${g}, expected ${p}: ${o}`)}text(){let p="",d;for(;d=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)p+=d;return p}}class a{constructor(p){this.tokens=p}}t.TokenData=a;function h(y,p={}){let{encodePath:d=n}=p,v=new u(c(y));function g(M){let T=[];for(;;){let C=v.text();C&&T.push({type:"text",value:d(C)});let H=v.tryConsume("PARAM");if(H){T.push({type:"param",name:H});continue}let $=v.tryConsume("WILDCARD");if($){T.push({type:"wildcard",name:$});continue}if(v.tryConsume("{")){T.push({type:"group",tokens:g("}")});continue}return v.consume(M),T}}let b=g("END");return new a(b)}function E(y,p={}){let{encode:d=encodeURIComponent,delimiter:v=e}=p,g=y instanceof a?y:h(y,p),b=S(g.tokens,v,d);return function(T={}){let[C,...H]=b(T);if(H.length)throw new TypeError(`Missing parameters: ${H.join(", ")}`);return C}}function S(y,p,d){let v=y.map(g=>R(g,p,d));return g=>{let b=[""];for(let M of v){let[T,...C]=M(g);b[0]+=T,b.push(...C)}return b}}function R(y,p,d){if(y.type==="text")return()=>[y.value];if(y.type==="group"){let g=S(y.tokens,p,d);return b=>{let[M,...T]=g(b);return T.length?[""]:[M]}}let v=d||n;return y.type==="wildcard"&&d!==!1?g=>{let b=g[y.name];if(b==null)return["",y.name];if(!Array.isArray(b)||b.length===0)throw new TypeError(`Expected "${y.name}" to be a non-empty array`);return[b.map((M,T)=>{if(typeof M!="string")throw new TypeError(`Expected "${y.name}/${T}" to be a string`);return v(M)}).join(p)]}:g=>{let b=g[y.name];if(b==null)return["",y.name];if(typeof b!="string")throw new TypeError(`Expected "${y.name}" to be a string`);return[v(b)]}}function D(y,p={}){let{decode:d=decodeURIComponent,delimiter:v=e}=p,{regexp:g,keys:b}=me(y,p),M=b.map(T=>d===!1?n:T.type==="param"?d:C=>C.split(v).map(d));return function(C){let H=g.exec(C);if(!H)return!1;let $=H[0],G=Object.create(null);for(let j=1;j<H.length;j++){if(H[j]===void 0)continue;let He=b[j-1],on=M[j-1];G[He.name]=on(H[j])}return{path:$,params:G}}}function me(y,p={}){let{delimiter:d=e,end:v=!0,sensitive:g=!1,trailing:b=!0}=p,M=[],T=[],C=g?"":"i",H=(Array.isArray(y)?y:[y]).map(G=>G instanceof a?G:h(G,p));for(let{tokens:G}of H)for(let j of I(G,0,[])){let He=he(j,d,M);T.push(He)}let $=`^(?:${T.join("|")})`;return b&&($+=`(?:${f(d)}$)?`),$+=v?"$":`(?=${f(d)}|$)`,{regexp:new RegExp($,C),keys:M}}function*I(y,p,d){if(p===y.length)return yield d;let v=y[p];if(v.type==="group"){let g=d.slice();for(let b of I(v.tokens,0,g))yield*I(y,p+1,b)}else d.push(v);yield*I(y,p+1,d)}function he(y,p,d){let v="",g="",b=!0;for(let M=0;M<y.length;M++){let T=y[M];if(T.type==="text"){v+=f(T.value),g+=T.value,b||(b=T.value.includes(p));continue}if(T.type==="param"||T.type==="wildcard"){if(!b&&!g)throw new TypeError(`Missing text after "${T.name}": ${o}`);T.type==="param"?v+=`(${we(p,b?"":g)}+)`:v+="([\\s\\S]+)",d.push(T),g="",b=!1;continue}}return v}function we(y,p){return p.length<2?y.length<2?`[^${f(y+p)}]`:`(?:(?!${f(y)})[^${f(p)}])`:y.length<2?`(?:(?!${f(p)})[^${f(y)}])`:`(?:(?!${f(p)}|${f(y)})[\\s\\S])`}function de(y){return y.tokens.map(function p(d,v,g){if(d.type==="text")return s(d.value);if(d.type==="group")return`{${d.tokens.map(p).join("")}}`;let b=nn(d.name)&&rn(g[v+1])?d.name:JSON.stringify(d.name);if(d.type==="param")return`:${b}`;if(d.type==="wildcard")return`*${b}`;throw new TypeError(`Unexpected token: ${d}`)}).join("")}function nn(y){let[p,...d]=y;return r.test(p)?d.every(v=>i.test(v)):!1}function rn(y){return(y==null?void 0:y.type)!=="text"?!0:!i.test(y.value[0])}}),Yt=rr(or());function rt(t){let[e="",...n]=t.split("#"),[r="",i=""]=e.split("?");return[r,i,n.join("#")]}function dt(t){let[e,n,r]=rt(t);return{path:e,query:Object.fromEntries(new URLSearchParams(n).entries()),hash:r==null?void 0:r.slice(1)}}var pt=t=>t==="*"?0:1e3-(t.match(/:\w+/g)||[]).length*100+t.length,B=t=>t==="/"?t:t.replace(/(\/)*$/,""),Y=(t,e="")=>!t||e.startsWith(t)?B(e):t.endsWith("/")&&e.startsWith("/")?B(t+e.slice(1)):!t.endsWith("/")&&!e.startsWith("/")?B(t+"/"+e):B(t+e),sr=t=>Yt.pathToRegexp(t,{end:!0}),ar=(t,e,n)=>t.reduce((r,i,o)=>(r[i.name]=e[o+1]||"",{...n,...r}),{}),lr=(t,e)=>(Array.isArray(t.alias)?t.alias:t.alias?[t.alias]:[]).map(n=>n.startsWith("/")?n:Y(e,n));function xe(t,e,n="hash",r="/"){let[i="",o,l]=rt(t),s=Yt.compile(i)((e==null?void 0:e.params)||{}),f=Object.fromEntries(new URLSearchParams(o).entries()),c=e!=null&&e.query||o?new URLSearchParams({...f,...e==null?void 0:e.query}).toString():"",u=`${e!=null&&e.hash||l?`#${(e==null?void 0:e.hash)||l}`:""}`,a=Y(r,c?`${s}?${c}${u}`:`${s}${u}`),h=n==="hash"?(()=>{let E=new URL(location.href);return E.hash=a,E.toString()})():Y(location.origin,a);return{fullPath:a,href:h}}function ur(t,e=globalThis.location.pathname){let[n="",r,i]=rt(e),o=Object.fromEntries(new URLSearchParams(r).entries()),l=(s,f="",c={})=>{var a;let u=[...s].sort((h,E)=>{let S=pt(h.path||"");return pt(E.path||"")-S});for(let h of u){let E=Y(f,h.path||""),S=lr(h,f);for(let R of[E,...S]){let{regexp:D,keys:me}=sr(R),I=D.exec(n);if(I){let he=ar(me,I,c);if((a=h.children)!=null&&a.length){let de=l(h.children,R,he);if(de)return de}let we={params:he,query:o,hash:i==null?void 0:i.replace("#","")};return Object.assign(h,we)}}}return null};return l(t)}var Jt={PAGE_MOUNTED:"page-mounted"},{isFunction:yt,isThenable:cr}=U,{EventBus:fr}=Be,ce,We;const Me=class Me{constructor(e){st(this,ce);m(this,"name");m(this,"namespace");m(this,"path");m(this,"alias");m(this,"component");m(this,"redirect");m(this,"meta");m(this,"children");m(this,"props");m(this,"functionComponent",null);m(this,"asyncComponentLoading",!1);m(this,"mountedComponent",null);var n;this.name=e.name,this.namespace=e.namespace||Symbol("DomilyAppNamespace"),this.path=e.path,this.alias=e.alias,this.component=e.component,this.redirect=e.redirect,this.meta=e.meta,this.props=e.props,this.children=(n=e.children)==null?void 0:n.map(r=>(r.namespace=r.namespace??this.namespace,new Me(r)))}static create(e){return new Me(e)}render(e,n){var l,s,f;let{resolve:r,reject:i,promise:o}=Promise.withResolvers();if(this.redirect){let c=Q.get(this.namespace);if(!c||!((l=c==null?void 0:c.globalProperties)!=null&&l.$router))return r(null),o;let u=c.globalProperties.$router,{path:a,name:h}=this.redirect;return r(a?((s=u.routesPathFlatMap[a])==null?void 0:s.render(e,n))||null:h&&((f=u.routesNameFlatMap[h])==null?void 0:f.render(e,n))||null),o}return cr(this.component)?(this.asyncComponentLoading=!0,this.component.then(({default:c})=>{this.functionComponent=c}).catch(i).finally(()=>{this.asyncComponentLoading=!1,yt(this.functionComponent)?r(Pe(this,ce,We).call(this,this.functionComponent,e,n)):r(null)})):yt(this.component)?(this.functionComponent=this.component,r(Pe(this,ce,We).call(this,this.functionComponent,e,n))):r(null),o}};ce=new WeakSet,We=function(e,n,r){var i,o;if((o=(i=this.mountedComponent)==null?void 0:i.schema)!=null&&o.__dom)this.mountedComponent.mount(n);else{let l=Ie(Object.assign({namespace:this.namespace},this.props),e,!0);if(!l)return null;l.mount(n),this.mountedComponent=l}return fr.emit(Jt.PAGE_MOUNTED,Object.assign({...this},{comp:this.mountedComponent,groupKey:r})),this.mountedComponent};let Ue=Me;var{EventBus:gt,EVENTS:mr}=Be,qe={count:0,increase:t=>(qe.count++,`${t}-${qe.count}`)},Z="/*",Et=t=>qe.increase((t==null?void 0:t.name)||(t==null?void 0:t.path)||"GROUP");class it{constructor(e,n){m(this,"mode","hash");m(this,"base","/");m(this,"GLobalPageRouterHistoryStoreMap",new Map);m(this,"GLobalPageRouterHistoryStoreMapLastKey");m(this,"GLobalPageRouterRenderingQueue",[]);m(this,"GLobalPageRouterRendering",!1);m(this,"initialed",!1);m(this,"root",null);m(this,"currentRoute",null);m(this,"app");m(this,"routes",[]);m(this,"beforeEach",[]);m(this,"afterEach",[]);let{routes:r,base:i="/",mode:o="hash"}=n||{};this.base=i,this.app=e,this.mode=o,this.routes=(r==null?void 0:r.map(l=>(l.namespace=l.namespace||e.namespace,l.path=B(l.path.startsWith(Z)?l.path:l.path.startsWith("*")?Z:Y(i,l.path)),Ue.create(l))))||[],this.currentRoute=this.match(),this.init()}get routesPathMap(){return Object.fromEntries(this.routes.map(e=>[e.path,e]))}get routesPathFlatMap(){let e={},n=(r,i=null)=>{r.forEach(o=>{e[Y(i==null?void 0:i.path,o.path)]=Object.assign(o,{parent:i}),o.children&&n(o.children,o)})};return n(this.routes),e}get routesNameMap(){return Object.fromEntries(this.routes.map(e=>[e.name||e.path,e]))}get routesNameFlatMap(){let e={},n=(r,i=null)=>{r.forEach(o=>{e[o.name||o.path]=Object.assign(o,{parent:i}),o.children&&n(o.children,o)})};return n(this.routes),e}init(){this.initialed||(gt.on(Jt.PAGE_MOUNTED,e=>{e.groupKey||(e.groupKey=Et(e));let n=this.GLobalPageRouterHistoryStoreMap.get(e.groupKey);n?this.GLobalPageRouterHistoryStoreMap.set(e.groupKey,[...n,e]):this.GLobalPageRouterHistoryStoreMap.set(e.groupKey,[e])}),this.initRouter(),gt.on(mr.APP_MOUNTED,e=>{this.root=e,this.matchPage()}),globalThis.addEventListener("popstate",e=>{let n=this.mode==="history"?location.href.replace(location.origin,""):location.hash.slice(1),r=0,i=0;if(e.state&&typeof e.state=="object"){let{name:o,path:l,query:s,params:f,x:c,y:u}=e.state,a=this.resolve({name:o,path:l,query:s,params:f});a!=null&&a.fullPath&&(n=a.fullPath,r=c,i=u)}this.matchPage(n,{afterRendered(o){o&&(globalThis.pageXOffset=r,globalThis.pageYOffset=i)}})}),this.initialed=!0)}obtainHistoryState(e){return{name:e==null?void 0:e.name,path:e==null?void 0:e.path,query:e==null?void 0:e.query,params:e==null?void 0:e.params,x:globalThis.pageXOffset,y:globalThis.pageYOffset}}async executeQueueRender(){if(!this.GLobalPageRouterRendering){for(this.GLobalPageRouterRendering=!0;this.GLobalPageRouterRenderingQueue.length;){let e=this.GLobalPageRouterRenderingQueue.shift();typeof e=="function"&&await e()}this.GLobalPageRouterRendering=!1}}async prepareRouterView(e,n,r){return n.childNodes.forEach(i=>i.remove()),n.setAttribute("path",e.path),await e.render(n,r)}async deepRender(e,n){if(await Promise.resolve().then(),!this.root||!e)return!1;let r=this.root.querySelector(W.name);if(!r)return!1;let i=[e],o=s=>{s.parent&&(i.unshift(s.parent),o(s.parent))};o(e);let l=null;for(let s=0;s<i.length;s++)if(s===0)l=await this.prepareRouterView(i[s],r,n);else if(l!=null&&l.schema.__dom&&"querySelector"in l.schema.__dom){let f=l.schema.__dom.querySelector(W.name);f&&(l=await this.prepareRouterView(i[s],f,n))}return!0}unmountLastRouterViewGroup(){if(!this.GLobalPageRouterHistoryStoreMapLastKey)return;let e=this.GLobalPageRouterHistoryStoreMap.get(this.GLobalPageRouterHistoryStoreMapLastKey);e!=null&&e.length&&e.forEach(n=>n.comp.unmount())}match(e){e=e||(this.mode==="history"?globalThis.location.href.replace(globalThis.location.origin,""):globalThis.location.hash.slice(1));let n=(()=>{let i={...this.routesPathFlatMap};return i[Z]&&Reflect.deleteProperty(i,Z),i})(),r=ur(Object.values(n),e);if(!r){let i=this.routesPathMap[Z];return i?Object.assign(i,xe(e,{},this.mode,this.base)):null}return Object.assign(r,xe(r.path,r,this.mode,this.base))}matchPage(e,n){let r=()=>new Promise(i=>{var s;let o=this.GLobalPageRouterHistoryStoreMapLastKey?(s=this.GLobalPageRouterHistoryStoreMap.get(this.GLobalPageRouterHistoryStoreMapLastKey))==null?void 0:s.at(-1):void 0,l=this.match(e);if(Array.isArray(this.beforeEach)&&this.beforeEach.length)for(let f of this.beforeEach)U.isFunction(f)&&f(o,l,c=>{if(!c){this.currentRoute=l;return}if(typeof c=="object"&&"render"in c&&U.isFunction(c.render)){this.currentRoute=c;return}if(typeof c=="string"){this.currentRoute=this.resolve({path:c});return}this.currentRoute=this.resolve(c)});else this.currentRoute=l;U.isFunction(n==null?void 0:n.afterMatched)&&n.afterMatched(this.currentRoute),this.unmountLastRouterViewGroup(),this.GLobalPageRouterHistoryStoreMapLastKey=Et(this.currentRoute),this.deepRender(this.currentRoute,this.GLobalPageRouterHistoryStoreMapLastKey).then(f=>{if(U.isFunction(n==null?void 0:n.afterRendered)&&n.afterRendered(f,this.currentRoute),f&&this.currentRoute&&this.currentRoute.href!==location.href&&history.replaceState(this.obtainHistoryState(this.currentRoute),"",this.currentRoute.href),Array.isArray(this.afterEach)&&this.afterEach.length)for(let c of this.afterEach)U.isFunction(c)&&c(this.currentRoute)}).finally(i)});this.GLobalPageRouterRenderingQueue.push(r),this.executeQueueRender()}resolve(e){let{name:n,path:r,query:i,params:o,hash:l}=e,s={query:i,params:o,hash:l},f=c=>{let{fullPath:u,href:a}=c?xe(c.path,s,this.mode,this.base):{};return{fullPath:u,href:a}};if(n){let c=this.routesNameFlatMap[n];return c?Object.assign(c,s,f(c)):null}if(r){let c=this.routesPathFlatMap[r];return c?Object.assign(c,s,f(c)):this.match(r)}return null}back(){history.back()}forward(){history.forward()}go(e){history.go(e)}push(e){typeof e=="string"&&(e=dt(e));let{href:n}=this.resolve(e)||{};n&&n!==location.href&&(history.pushState(this.obtainHistoryState(e),"",n),this.matchPage())}replace(e){typeof e=="string"&&(e=dt(e));let{href:n}=this.resolve(e)||{};n&&n!==location.href&&(history.replaceState(this.obtainHistoryState(e),"",n),this.matchPage())}}class Xt extends it{constructor(e,n){super(e,{...n,mode:"hash"}),Reflect.set(this.app.globalProperties,"$router",this),Reflect.defineProperty(this.app.globalProperties,"$route",{get:()=>this.currentRoute})}initRouter(){globalThis.location.hash||(globalThis.location.hash="#/"),globalThis.addEventListener("hashchange",()=>{this.matchPage()})}}class Zt extends it{constructor(e,n){super(e,{...n,mode:"history"}),Reflect.set(this.app.globalProperties,"$router",this),Reflect.defineProperty(this.app.globalProperties,"$route",{get:()=>this.currentRoute})}initRouter(){}}function en(t,e){return["push","replace","resolve","back","forward","go","routes","currentRoute"].forEach(n=>{t[n]||Reflect.defineProperty(t,n,{get(){let r=Reflect.get(e,n,e);return typeof r=="function"?r.bind(e):r}})}),e}function tn(t){let e=[],n=[],r={install:i=>{let o=new Zt(i,t);o.beforeEach=e,o.afterEach=n,en(r,o)},beforeEach(i){e.includes(i)||e.push(i)},afterEach(i){n.includes(i)||n.push(i)}};return r}function hr(t){let e=[],n=[],r={install:i=>{let o=new Xt(i,t);o.beforeEach=e,o.afterEach=n,en(r,o)},beforeEach(i){e.includes(i)||e.push(i)},afterEach(i){n.includes(i)||n.push(i)}};return r}function dr(t){let e=zt(t);if(!e)throw new Error("the useRouter must be used by a domily app");return e.globalProperties.$router}function pr(t){let e=zt(t);if(e)return e.globalProperties.$route}var yr={DomilyRouterBase:it,DomilyHashRouter:Xt,DomilyHistoryRouter:Zt,createHistoryRouter:tn,createHashRouter:hr,useRouter:dr,useRoute:pr};Reflect.get(globalThis,"DomilyRouter")||Reflect.defineProperty(globalThis,"DomilyRouter",{value:yr});const gr=[{name:"index",path:"/",component:Ee(()=>import("./index-B90AYqLj.js").then(t=>t.i),__vite__mapDeps([0,1]))},{name:"map-list",path:"/map-list",component:Ee(()=>import("./index-B4GADjW0.js"),[])},{name:"not-found",path:"*",component:Ee(()=>import("./404-D8caa1Mh.js"),[])}],Er=tn({base:"/domily",routes:gr}),br=Jn({onNeedRefresh(){confirm("检测到新版本，是否立即更新？")&&br()},onOfflineReady(){console.log("离线模式已就绪")}}),{app:vr,mount:Lr}=Bt(Xn);vr.use(Er);Lr("#app");export{mn as D,dr as N,$t as P,Ee as _,Sr as c,Mr as i,ct as m,pr as q,Mt as w};
