var M=Object.defineProperty;var f=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),u=e=>{throw TypeError(e)};var $=(e,t,o)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var c=(e,t,o)=>$(e,typeof t!="symbol"?t+"":t,o);var g=(e,t,o)=>{if(t!=null){typeof t!="object"&&typeof t!="function"&&u("Object expected");var s,i;o&&(s=t[f("asyncDispose")]),s===void 0&&(s=t[f("dispose")],o&&(i=s)),typeof s!="function"&&u("Object not disposable"),i&&(s=function(){try{i.call(this)}catch(d){return Promise.reject(d)}}),e.push([o,s,t])}else o&&e.push([o]);return t},y=(e,t,o)=>{var s=typeof SuppressedError=="function"?SuppressedError:function(n,a,r,l){return l=Error(r),l.name="SuppressedError",l.error=n,l.suppressed=a,l},i=n=>t=o?new s(n,t,"An error was suppressed during disposal"):(o=!0,n),d=n=>{for(;n=e.pop();)try{var a=n[1]&&n[1].call(n[2]);if(n[0])return Promise.resolve(a).then(d,r=>(i(r),d()))}catch(r){i(r)}if(o)throw t};return d()};import{i as m,c as h}from"./index-GyUktwJm.js";class D{constructor(t,o){c(this,"url");c(this,"loading");c(this,"reqInit");c(this,"response");const{loading:s,...i}=o||{};this.url=t,this.loading=s||m(!1),this.reqInit=i,s.value=!0}async fetch(){this.response=await fetch(this.url,this.reqInit)}[Symbol.dispose](){this.loading.value=!1}}function q(){const e=m(!1),t=h({data:{map:new Map,array:[],set:new Set},key:0}),o=()=>{var a;(a=document.querySelector("#global-loading"))==null||a.remove()},s={color:"blue"},i=h({color:"green"}),d=async()=>{var l=[];try{const a=g(l,new D("https://api.pearktrue.cn/api/countdownday/",{loading:e}),!0);await a.fetch();const r=await a.response.json();i.color="red";t.data.map=new Map(r.data.map((k,b)=>[`${b}`,k]));t.data.set=new Set(r.data);t.data.array=r.data}catch(x){var w=x,v=!0}finally{var p=y(l,w,v);p&&await p}},n={tag:"div",domIf:()=>e.value,text:"Loading..."};return{key:()=>`container-${t.key}`,tag:"fragment",className:"test-page",css:{".test-page":{margin:"20px"}},mounted:o,style:i,children:[{tag:"button",text:"Get Data",style:"cursor: pointer",on:{click:()=>{d()}}},{tag:"button",text:"shift",style:"cursor: pointer",on:{click:()=>{t.data.array.shift(),t.data.map=new Map(t.data.array.map((a,r)=>[`${r}`,a])),t.data.set=new Set(t.data.array)}}},{tag:"button",text:"unshift",style:"cursor: pointer",on:{click:()=>{const a=(Math.random()*5e3).toFixed(0)+"-"+Date.now();t.data.array.unshift(a),t.data.map=new Map(t.data.array.map((r,l)=>[`${l}`,r])),t.data.set=new Set(t.data.array)}}},{tag:"button",text:"pop",style:"cursor: pointer",on:{click:()=>{t.data.map.delete(`${t.data.array.length-1}`);const a=t.data.array.pop();t.data.set.delete(a)}}},{tag:"button",text:"push",style:"cursor: pointer",on:{click:()=>{const a=(Math.random()*5e3).toFixed(0)+"-"+Date.now();t.data.array.push(a),t.data.map.set(`${t.data.array.length-1}`,a),t.data.set.add(a)}}},{tag:"button",text:()=>`change Key: ${t.key}`,style:"cursor: pointer",on:{click:()=>{s.color=["#ff00f3","#00f3ff","#f3ff00","#f300ff","#00f300","#ff0000","#0000ff","#00ff00","#ff00ff","#00ffff"][Math.floor(Math.random()*10)],t.key++}}},{tag:"div",text:"非响应式对象更新测试内容",style:s},{tag:"div",style:"display: flex; gap: 10px;",children:[{tag:"div",style:"width: 500px; height: 500px; overflow: auto; border: 1px solid #ccc;",children:[{tag:"h3",text:"Map Data"},n,{tag:"div",style:'white-space: pre-wrap; font-family: "Courier New", Courier, monospace;',children:[{tag:"ul",domIf:()=>!e.value,mapList:{list:()=>t.data.map,map:([a,r])=>({tag:"li",key:`list-${a}`,text:r})}}]}]},{tag:"div",style:"width: 500px; height: 500px; overflow: auto; border: 1px solid #ccc;",children:[{tag:"h3",text:"Set Data"},n,{tag:"div",style:'white-space: pre-wrap; font-family: "Courier New", Courier, monospace;',children:[{tag:"ul",domIf:()=>!e.value,mapList:{list:()=>t.data.set,map:(a,r)=>({tag:"li",key:`list-${r}`,text:a})}}]}]},{tag:"div",style:"width: 500px; height: 500px; overflow: auto; border: 1px solid #ccc;",children:[{tag:"h3",text:"Array Data"},n,{tag:"ul",domIf:()=>!e.value,mapList:{list:()=>t.data.array,map:(a,r)=>({tag:"li",key:`list-${r}`,text:a})}}]}]}]}}export{q as default};
